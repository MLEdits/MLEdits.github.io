<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>

        num_aps = len(aps) + 1e-10
        num_sta = sum(len(ap[&quotclients&quot]) for ap in aps) + 1e-10
        num_peers = <a id="change">len(peers)</a> + 1e-10

        aps_per_chan = [0.0] * wifi.NumChannels
        sta_per_chan = [0.0] * wifi.NumChannels
        peers_per_chan = [0.0] * wifi.NumChannels

        for ap in aps:
            ch_idx = ap[&quotchannel&quot] - 1
            try:
                aps_per_chan[ch_idx] += 1.0
                sta_per_chan[ch_idx] += len(ap[&quotclients&quot])
            except IndexError as e:
                logging.error("got data on channel %d, we can store %d channels" % (ap[&quotchannel&quot], wifi.NumChannels))

        for peer in peers:
            try:
                peers_per_chan[peer.last_channel - 1] += 1.0
            except IndexError as e:
                logging.error(
                    "got peer data on channel %d, we can store %d channels" % (peer.last_channel, wifi.NumChannels))

        &#47&#47 normalize
        aps_per_chan = [e / num_aps for e in aps_per_chan]
        sta_per_chan = [e / num_sta for e in sta_per_chan]
        peers_per_chan = [e / num_peers for e in peers_per_chan]

        <a id="change">self._observation</a> = {
            &quotaps_histogram&quot: aps_per_chan,
            &quotsta_histogram&quot: sta_per_chan,
            &quotpeers_histogram&quot: peers_per_chan</code></pre><h3>After Change</h3><pre><code class='java'>
        else:
            self.blind_for = 0

        self.num_peers = <a id="change">len(peers)</a>

        num_aps = len(aps) + 1e-10
        num_sta = sum(len(ap[&quotclients&quot]) for ap in aps) + 1e-10
        num_peers = <a id="change">self.num_peers + 1e-10</a>  &#47&#47 avoid division by 0
        aps_per_chan = [0.0] * wifi.NumChannels
        sta_per_chan = [0.0] * wifi.NumChannels
        peers_per_chan = [0.0] * wifi.NumChannels

        for ap in aps:
            ch_idx = ap[&quotchannel&quot] - 1
            try:
                aps_per_chan[ch_idx] += 1.0
                sta_per_chan[ch_idx] += len(ap[&quotclients&quot])
            except IndexError as e:
                logging.error("got data on channel %d, we can store %d channels" % (ap[&quotchannel&quot], wifi.NumChannels))

        for peer in peers:
            try:
                peers_per_chan[peer.last_channel - 1] += 1.0
            except IndexError as e:
                logging.error(
                    "got peer data on channel %d, we can store %d channels" % (peer.last_channel, wifi.NumChannels))

        &#47&#47 normalize
        aps_per_chan = [e / num_aps for e in aps_per_chan]
        sta_per_chan = [e / num_sta for e in sta_per_chan]
        peers_per_chan = [e / num_peers for e in peers_per_chan]

        <a id="change">self._observation</a> = {
            &quotaps_histogram&quot: aps_per_chan,
            &quotsta_histogram&quot: sta_per_chan,
            &quotpeers_histogram&quot: peers_per_chan</code></pre>