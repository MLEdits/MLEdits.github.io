<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        test_driver.graph = test_driver._create_graph()
        with self.test_session(graph=test_driver.graph) as sess:
            sess.run(test_driver._init_op)
            import pdb; <a id="change">pdb.set_trace()</a>
            coord = tf.train.Coordinator()

if __name__ == "__main__":
    set_logger()</code></pre><h3>After Change</h3><pre><code class='java'>
            coord = tf.train.Coordinator()
            for sampler in test_driver.app.get_sampler():
                sampler.run_threads(sess, coord, test_driver.num_threads)
            <a id="change">for i, train_op in test_driver.app.training_ops(0, 2):
                sess.run(train_op)
                s_0, s_1, s_2, s_3 = sess.run([
                    test_driver.graph.get_tensor_by_name(
                        &quotworker_0/feature_input:0&quot),
                    test_driver.graph.get_tensor_by_name(
                        &quotworker_1/feature_input:0&quot),
                    test_driver.graph.get_tensor_by_name(
                        &quotworker_2/feature_input:0&quot),
                    test_driver.graph.get_tensor_by_name(
                        &quotworker_3/feature_input:0&quot)
                ])
                msg = &quotsame input data for different devices&quot
                self.assertGreater(np.sum(np.abs(s_0 - s_1)), 0.0, msg)
                self.assertGreater(np.sum(np.abs(s_0 - s_2)), 0.0, msg)
                self.assertGreater(np.sum(np.abs(s_0 - s_3)), 0.0, msg)
                self.assertGreater(np.sum(np.abs(s_1 - s_2)), 0.0, msg)
                self.assertGreater(np.sum(np.abs(s_1 - s_3)), 0.0, msg)
                self.assertGreater(np.sum(np.abs(s_2 - s_3)), 0.0, msg)
       </a> test_driver.app.stop()

    def test_multi_device_gradients(self):
        test_driver = get_initialised_driver()</code></pre>