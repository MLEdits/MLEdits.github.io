<html><h3>c88688032b3173bb140677e0e4e7b481efd3a5b9,onmt/modules/MultiHeadedAttn.py,MultiHeadedAttention,forward,#MultiHeadedAttention#Any#Any#Any#Any#,28
</h3><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        batch2, t_len2, d2 = value.size()
        batch3, q_len, d3 = query.size()
        assert batch == batch2
        <a id="change">assert batch == batch3</a>
        assert t_len == t_len2
        assert d == self.d_model

        def shape_projection(x):</code></pre><h3>After Change</h3><pre><code class='java'>
        aeq(batch, batch_)
        aeq(d, d_)
        aeq(self.d_model % 8, 0)
        <a id="change">if mask is not None:
            batch_, q_len_, k_len_ = mask.size()
            aeq(batch_, batch)
            aeq(k_len_, k_len)
            aeq(q_len_ == q_len)
        &#47&#47 END CHECKS

       </a> def shape_projection(x):
            b, l, d = x.size()
            return x.view(b, l, self.heads, self.d_k).transpose(1, 2) \
                    .contiguous().view(b * self.heads, l, self.d_k)</code></pre><img src="513.png" alt="Italian Trulli"   style="width:500px;height:500px;"><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 4</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/OpenNMT/OpenNMT-py/commit/c88688032b3173bb140677e0e4e7b481efd3a5b9#diff-71b28e6f99a7311048005b3f94c655fc3729c342914ec7c8654e6e80ef86559fL30' target='_blank'>Link</a></div><div id='project'> Project Name: OpenNMT/OpenNMT-py</div><div id='commit'> Commit Name: c88688032b3173bb140677e0e4e7b481efd3a5b9</div><div id='time'> Time: 2017-07-05</div><div id='author'> Author: srush@sum1gpu01.rc.fas.harvard.edu</div><div id='file'> File Name: onmt/modules/MultiHeadedAttn.py</div><div id='class'> Class Name: MultiHeadedAttention</div><div id='method'> Method Name: forward</div><BR><BR><div id='link'><a href='https://github.com/OpenNMT/OpenNMT-py/commit/3dc20bc15b767ad60edfc15154b630dbef8b79cc#diff-66250920430e997129bc22675aac60b21312f9d938458356b32f18af3a3e54d8L102' target='_blank'>Link</a></div><div id='project'> Project Name: OpenNMT/OpenNMT-py</div><div id='commit'> Commit Name: 3dc20bc15b767ad60edfc15154b630dbef8b79cc</div><div id='time'> Time: 2017-12-12</div><div id='author'> Author: dengyuntian@gmail.com</div><div id='file'> File Name: onmt/IO.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: read_img_file</div><BR><BR><div id='link'><a href='https://github.com/OpenNMT/OpenNMT-py/commit/b5486aaea994960688152e91fbab7699dc04e8c1#diff-fa3c76576694291de650c11f3e3a4d00a68e887bfedddaf1079b5a7ac6903d6cL276' target='_blank'>Link</a></div><div id='project'> Project Name: OpenNMT/OpenNMT-py</div><div id='commit'> Commit Name: b5486aaea994960688152e91fbab7699dc04e8c1</div><div id='time'> Time: 2017-08-14</div><div id='author'> Author: taolei@csail.mit.edu</div><div id='file'> File Name: onmt/Models.py</div><div id='class'> Class Name: Decoder</div><div id='method'> Method Name: forward</div><BR>