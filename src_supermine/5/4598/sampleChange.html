<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
    &#47&#47 flatten inputs
    flat_input = nest.flatten(inputs)
    &#47&#47 batch_size = flat_input[0].shape[0].value
    <a id="change">shape = inputs.get_shape().as_list()</a>
    dim = reduce(lambda x, y: x*y, shape[1:])
    flat_input = [tf.reshape(input_, ([-1, dim])) for input_ in flat_input]
    concat_input = tf.concat(flat_input, 1)
</code></pre><h3>After Change</h3><pre><code class='java'>
    flat_input = nest.flatten(inputs)
    &#47&#47 batch_size = flat_input[0].shape[0].value
    &#47&#47 TODO(zhiting): correct ?
    <a id="change">dims = [_get_tensor_depth(x) for x in flat_input]</a>
    flat_input = [tf.reshape(x, ([-1, d])) <a id="change">for</a> x, d in zip(flat_input, dims)]
    &#47&#47shape = inputs.get_shape().as_list()
    &#47&#47dim = reduce(lambda x, y: x*y, shape[1:])
    &#47&#47flat_input = [tf.reshape(input_, ([-1, dim])) for input_ in flat_input]</code></pre>