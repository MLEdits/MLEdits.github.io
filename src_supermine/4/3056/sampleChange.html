<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        self.assertAllEqual(sess.run(trainable_state), sess.run(initial_state))

      &#47&#47 Change the value of all the trainable variables to ones.
      <a id="change">for variable in tf.trainable_variables():
        sess.run(tf.assign(variable, tf.ones_like(variable)))

      &#47&#47 Check that the values of the initial_states have changed if and only if
      &#47&#47 they are trainable.
     </a> for trainable_state, initial_state, mask in zip(flat_trainable_state,
                                                      flat_initial_state,
                                                      flat_mask):
        trainable_state_value = sess.run(trainable_state)</code></pre><h3>After Change</h3><pre><code class='java'>

    &#47&#47 In eager mode to re-evaluate the module we must re-connect it.
    trainable_state = trainable_state_module()
    <a id="change">flat_trainable_state = nest.flatten(trainable_state)</a>

    &#47&#47 Check that the values of the initial_states have changed if and only if
    &#47&#47 they are trainable.
    <a id="change">for trainable_state, initial_state, mask in zip(flat_trainable_state,
                                                    flat_initial_state,
                                                    flat_mask):
      trainable_state_value = self.evaluate(trainable_state)
      initial_state_value = self.evaluate(initial_state)
      if mask:
        expected_value = np.ones_like(initial_state_value)
      else:
        expected_value = initial_state_value

      self.assertAllEqual(trainable_state_value, expected_value)

 </a> def testBadArguments(self):
    initial_state = (tf.random_normal([BATCH_SIZE, 6]),
                     (tf.random_normal([BATCH_SIZE, 7]),
                      tf.random_normal([BATCH_SIZE, 8])))</code></pre>