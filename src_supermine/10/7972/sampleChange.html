<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
        The model will be instrumented and user should never edit it after calling this method.
        `self.modules_to_compress` records all the to-be-compressed layers
        
        <a id="change">for op in self.bound_model.get_operations():
            weight_index = _detect_weight_index(op)
            if weight_index is None:
                _logger.warning(&quotFailed to detect weight for layer %s&quot, op.name)
                return
            weight_op = op.inputs[weight_index].op
            weight = weight_op.inputs[0]

            layer = LayerInfo(op, weight, weight_op)
            config = self.select_config(layer)
            if config is not None:
                self._instrument_layer(layer, config)
                self.modules_to_compress.append((layer, config))
       </a> return self.bound_model

    def get_modules_to_compress(self):
        </code></pre><h3>After Change</h3><pre><code class='java'>
        The model will be instrumented and user should never edit it after calling this method.
        `self.modules_to_compress` records all the to-be-compressed layers
        
        <a id="change">modules_to_compress = self.detect_modules_to_compress()</a>
        <a id="change">for layer, config in modules_to_compress:
            self._instrument_layer(layer, config)
       </a> return self.bound_model

    def get_modules_to_compress(self):
        </code></pre>