<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
      accumulator = self._create_accumulator()

    &#47&#47 TODO(momernick): Benchmark improvements to this algorithm.
    <a id="change">if isinstance(values, (str, bytes, np.int64)):
      accumulator.count_dict[values] += 1
    else:
      for document in values:
        if not isinstance(document, list):
          accumulator.count_dict[document] += 1
        else:
          for token in document:
            accumulator.count_dict[token] += 1

   </a> return accumulator

  def merge(self, accumulators):
    Merge several accumulators to a single accumulator.</code></pre><h3>After Change</h3><pre><code class='java'>
    if not isinstance(values, list):
      values = [values]
    for document in values:
      <a id="change">if not isinstance(document, list):
        document = [document]
     </a> if self._compute_idf:
        current_doc_id = accumulator.data["next_doc_id"]
        accumulator.data["next_doc_id"] += 1
      for token in document:</code></pre>