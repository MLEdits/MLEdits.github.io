<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
  @parameterized.parameters(rmsprop.RMSProp, rmsprop.ReferenceRMSProp)
  def testMovingVariablesColocatedWithOriginal(self, opt_class):
    optimizer = opt_class(learning_rate=0.1)
    device = <a id="change">"GPU:0" if self.primary_device == "GPU" else "CPU:0"</a>
    with tf.device(device):
      var = tf.Variable(1.0)
    for moving_var in optimizer._get_or_create_moving_vars(var):
      if moving_var is not None:</code></pre><h3>After Change</h3><pre><code class='java'>
    optimizer = opt_class(learning_rate=0.1)
    with tf.device("CPU:0"):
      var = tf.Variable(1.0)
    optimizer.apply([<a id="change">tf.constant(0.1)</a>], [var])
    self.assertEqual(optimizer.mom[0].device, var.device)
    self.assertEqual(optimizer.ms[0].device, var.device)
</code></pre>